/* SCEditor v2.1.2 | (C) 2017, Sam Clarke | sceditor.com/license */

!function(e){"use strict";function t(e,t){return typeof t===e}function n(e){return!Object.keys(e).length}function o(e,t){for(var n=e===!!e,i=n?2:1,r=n?t:e,a=!!n&&e;i<arguments.length;i++){var l=arguments[i];for(var c in l){var s=l[c];if(!le(s)){var u=null!==s&&"object"==typeof s&&Object.getPrototypeOf(s)===Object.prototype,d=Array.isArray(s);r[c]=a&&(u||d)?o(!0,r[c]||(d?[]:{}),s):s}}}return r}function i(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}function r(e,t){if(Array.isArray(e)||"length"in e&&se(e.length))for(var n=0;n<e.length;n++)t(n,e[n]);else Object.keys(e).forEach(function(n){t(n,e[n])})}function a(e){return e=parseFloat(e),isFinite(e)?e:0}function l(e,t,n){var o=(n||document).createElement(e);return r(t||{},function(e,t){"style"===e?o.style.cssText=t:e in o?o[e]=t:o.setAttribute(e,t)}),o}function c(e,t){for(var n=[],o=e||{};(o=o.parentNode)&&!/(9|11)/.test(o.nodeType);)t&&!E(o,t)||n.push(o);return n}function s(e,t){for(var n=e||{};(n=n.parentNode)&&!/(9|11)/.test(n.nodeType);)if(!t||E(n,t))return n}function u(e,t){return E(e,t)?e:s(e,t)}function d(e){e.parentNode&&e.parentNode.removeChild(e)}function f(e,t){e.appendChild(t)}function p(e,t){return e.querySelectorAll(t)}function m(e,t,n,o,i){t.split(" ").forEach(function(t){var r;ae(n)?(r=o["_sce-event-"+t+n]||function(t){for(var i=t.target;i&&i!==e;){if(E(i,n))return void o.call(i,t);i=i.parentNode}},o["_sce-event-"+t+n]=r):(r=n,i=o),e.addEventListener(t,r,i||!1)})}function g(e,t,n,o,i){t.split(" ").forEach(function(t){var r;ae(n)?r=o["_sce-event-"+t+n]:(r=n,i=o),e.removeEventListener(t,r,i||!1)})}function h(e,t,n){if(arguments.length<3)return e.getAttribute(t);null==n?v(e,t):e.setAttribute(t,n)}function v(e,t){e.removeAttribute(t)}function b(e){w(e,"display","none")}function y(e){w(e,"display","")}function x(e){A(e)?b(e):y(e)}function w(e,t,n){if(arguments.length<3){if(ae(t))return 1===e.nodeType?getComputedStyle(e)[t]:null;r(t,function(t,n){w(e,t,n)})}else{var o=(n||0===n)&&!isNaN(n);e.style[t]=o?n+"px":n}}function C(e,t,n){var o=arguments.length,i={};if(e.nodeType===de){if(1===o)return r(e.attributes,function(e,t){/^data\-/i.test(t.name)&&(i[t.name.substr(5)]=t.value)}),i;if(2===o)return h(e,"data-"+t);h(e,"data-"+t,String(n))}}function E(e,t){var n=!1;return e&&e.nodeType===de&&(n=(e.matches||e.msMatchesSelector||e.webkitMatchesSelector).call(e,t)),n}function k(e,t){return e!==t&&e.contains&&e.contains(t)}function S(e,t){var n=e.previousElementSibling;return t&&n?E(n,t)?n:null:n}function T(e,t){return t.parentNode.insertBefore(e,t)}function D(e){return e.className.trim().split(/\s+/)}function M(e,t){return E(e,"."+t)}function N(e,t){var n=D(e);n.indexOf(t)<0&&n.push(t),e.className=n.join(" ")}function R(e,t){var n=D(e);i(n,t),e.className=n.join(" ")}function H(e,t,n){(n=le(n)?!M(e,t):n)?N(e,t):R(e,t)}function F(e,t){if(le(t)){var n=getComputedStyle(e),o=a(n.paddingLeft)+a(n.paddingRight),i=a(n.borderLeftWidth)+a(n.borderRightWidth);return e.offsetWidth-o-i}w(e,"width",t)}function z(e,t){if(le(t)){var n=getComputedStyle(e),o=a(n.paddingTop)+a(n.paddingBottom),i=a(n.borderTopWidth)+a(n.borderBottomWidth);return e.offsetHeight-o-i}w(e,"height",t)}function _(e,t,n){var o;ce(window.CustomEvent)?o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n}):(o=e.ownerDocument.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,n),e.dispatchEvent(o)}function A(e){return!!e.getClientRects().length}function O(e){return e.replace(/^-ms-/,"ms-").replace(/-(\w)/g,function(e,t){return t.toUpperCase()})}function B(e,t,n,o,i){for(e=i?e.lastChild:e.firstChild;e;){var r=i?e.previousSibling:e.nextSibling;if(!n&&!1===t(e)||!o&&!1===B(e,t,n,o,i)||n&&!1===t(e))return!1;e=r}}function I(e,t,n,o){B(e,t,n,o,!0)}function L(e,t){var n=(t=t||document).createDocumentFragment(),o=l("div",{},t);for(o.innerHTML=e;o.firstChild;)f(n,o.firstChild);return n}function P(e){return e&&(!E(e,"p,div")||e.className||h(e,"style")||!n(C(e)))}function V(e,t){var n=l(t,{},e.ownerDocument);for(r(e.attributes,function(e,t){try{h(n,t.name,t.value)}catch(e){}});e.firstChild;)f(n,e.firstChild);return e.parentNode.replaceChild(n,e),n}function j(e){return!!/11?|9/.test(e.nodeType)&&"|iframe|area|base|basefont|br|col|frame|hr|img|input|wbr|isindex|link|meta|param|command|embed|keygen|source|track|object|".indexOf("|"+e.nodeName.toLowerCase()+"|")<0}function W(e,t){var n,o=(e||{}).nodeType||fe;return o!==de?o===fe:"code"===(n=e.tagName.toLowerCase())?!t:me.indexOf("|"+n+"|")<0}function q(e,t){t.style.cssText=e.style.cssText+t.style.cssText}function U(e){var t=function(e){for(;W(e.parentNode,!0);)e=e.parentNode;return e};B(e,function(e){var n=!W(e,!0);if(n&&W(e.parentNode,!0)){var o=t(e),i=K(o,e),r=e;q(o,r),T(i,o),T(r,o)}if(n&&E(e,"ul,ol")&&E(e.parentNode,"ul,ol")){var a=S(e,"li");a||T(a=l("li"),e),f(a,e)}})}function $(e,t){return e?(t?e.previousSibling:e.nextSibling)||$(e.parentNode,t):null}function Y(e){var t,n,o,i,r,a,l,c=w(e,"whiteSpace"),s=/line$/i.test(c),u=e.firstChild;if(!/pre(\-wrap)?$/i.test(c))for(;u;){if(a=u.nextSibling,t=u.nodeValue,(n=u.nodeType)===de&&u.firstChild&&Y(u),n===fe){for(o=$(u),i=$(u,!0),l=!1;M(i,"sceditor-ignore");)i=$(i,!0);if(W(u)&&i){for(r=i;r.lastChild;)for(r=r.lastChild;M(r,"sceditor-ignore");)r=$(r,!0);l=r.nodeType===fe?/[\t\n\r ]$/.test(r.nodeValue):!W(r)}t=t.replace(/\u200B/g,""),i&&W(i)&&!l||(t=t.replace(s?/^[\t ]+/:/^[\t\n\r ]+/,"")),o&&W(o)||(t=t.replace(s?/[\t ]+$/:/[\t\n\r ]+$/,"")),t.length?u.nodeValue=t.replace(s?/[\t ]+/g:/[\t\n\r ]+/g," "):d(u)}u=a}}function K(e,t){var n=e.ownerDocument.createRange();return n.setStartBefore(e),n.setEndAfter(t),n.extractContents()}function X(e){for(var t=0,n=0;e;)t+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;return{left:t,top:n}}function Q(e,t){var n,o,i=e.style;if(ue[t]||(ue[t]=O(t)),t=ue[t],o=i[t],"textAlign"===t){if(n=i.direction,o=o||w(e,t),w(e.parentNode,t)===o||"block"!==w(e,"display")||E(e,"hr,th"))return"";if(/right/i.test(o)&&"rtl"===n||/left/i.test(o)&&"ltr"===n)return""}return o}function G(e){return e.replace(/([\-.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function J(e,t){if(!e)return e;var n={"&":"&amp;","<":"&lt;",">":"&gt;","  ":"&nbsp; ","\r\n":"<br />","\r":"<br />","\n":"<br />"};return!1!==t&&(n['"']="&#34;",n["'"]="&#39;",n["`"]="&#96;"),e=e.replace(/ {2}|\r\n|[&<>\r\n'"`]/g,function(e){return n[e]||e})}function Z(e){if("mozHidden"in document)for(var t,n=e.getBody();n;){if((t=n).firstChild)t=t.firstChild;else{for(;t&&!t.nextSibling;)t=t.parentNode;t&&(t=t.nextSibling)}3===n.nodeType&&/[\n\r\t]+/.test(n.nodeValue)&&(/^pre/.test(w(n.parentNode,"whiteSpace"))||d(n)),n=t}}function ee(e){var t=this,n=[],o=function(e){return"signal"+e.charAt(0).toUpperCase()+e.slice(1)},i=function(t,i){t=[].slice.call(t);var r,a,l=o(t.shift());for(r=0;r<n.length;r++)if(l in n[r]&&(a=n[r][l].apply(e,t),i))return a};t.call=function(){i(arguments,!1)},t.callOnlyFirst=function(){return i(arguments,!0)},t.hasHandler=function(e){var t=n.length;for(e=o(e);t--;)if(e in n[t])return!0;return!1},t.exists=function(e){return e in Te&&"function"==typeof(e=Te[e])&&"object"==typeof e.prototype},t.isRegistered=function(e){if(t.exists(e))for(var o=n.length;o--;)if(n[o]instanceof Te[e])return!0;return!1},t.register=function(o){return!(!t.exists(o)||t.isRegistered(o)||(o=new Te[o],n.push(o),"init"in o&&o.init.call(e),0))},t.deregister=function(o){var i,r=n.length,a=!1;if(!t.isRegistered(o))return a;for(;r--;)n[r]instanceof Te[o]&&(a=!0,"destroy"in(i=n.splice(r,1)[0])&&i.destroy.call(e));return a},t.destroy=function(){for(var t=n.length;t--;)"destroy"in n[t]&&n[t].destroy.call(e);n=[],e=null}}function te(e,t){var n,o,i=t||e.contentDocument||e.document,r="sceditor-start-marker",a="sceditor-end-marker",c=this;c.insertHTML=function(e,t){var n,o;if(!c.selectedRange())return!1;for(t&&(e+=c.selectedHtml()+t),o=l("p",{},i),n=i.createDocumentFragment(),o.innerHTML=e;o.firstChild;)f(n,o.firstChild);c.insertNode(n)},o=function(e,t,o){var s,u=i.createDocumentFragment();if("string"==typeof e?(t&&(e+=c.selectedHtml()+t),u=L(e)):(f(u,e),t&&(f(u,c.selectedRange().extractContents()),f(u,t))),s=u.lastChild){for(;!W(s.lastChild,!0);)s=s.lastChild;if(j(s)?s.lastChild||f(s,document.createTextNode("â€‹")):s=u,c.removeMarkers(),f(s,n(r)),f(s,n(a)),o){var d=l("div");return f(d,u),d.innerHTML}return u}},c.insertNode=function(e,t){var n=o(e,t),i=c.selectedRange(),r=i.commonAncestorContainer;if(!n)return!1;i.deleteContents(),r&&3!==r.nodeType&&!j(r)?T(n,r):i.insertNode(n),c.restoreRange()},c.cloneSelected=function(){var e=c.selectedRange();if(e)return e.cloneRange()},c.selectedRange=function(){var t,n,o=e.getSelection();if(o){if(o.rangeCount<=0){for(n=i.body;n.firstChild;)n=n.firstChild;(t=i.createRange()).setStartBefore(n),o.addRange(t)}return o.rangeCount>0&&(t=o.getRangeAt(0)),t}},c.hasSelection=function(){var t=e.getSelection();return t&&t.rangeCount>0},c.selectedHtml=function(){var e,t=c.selectedRange();return t?(e=l("p",{},i),f(e,t.cloneContents()),e.innerHTML):""},c.parentNode=function(){var e=c.selectedRange();if(e)return e.commonAncestorContainer},c.getFirstBlockParent=function(e){var t=function(e){return W(e,!0)&&(e=e?e.parentNode:null)?t(e):e};return t(e||c.parentNode())},c.insertNodeAt=function(e,t){var n=c.selectedRange(),o=c.cloneSelected();if(!o)return!1;o.collapse(e),o.insertNode(t),c.selectRange(n)},n=function(e){c.removeMarker(e);var t=l("span",{id:e,className:"sceditor-selection sceditor-ignore",style:"display:none;line-height:0"},i);return t.innerHTML=" ",t},c.insertMarkers=function(){var e=c.selectedRange(),t=n(r);c.removeMarkers(),c.insertNodeAt(!0,t),e&&e.collapsed?t.parentNode.insertBefore(n(a),t.nextSibling):c.insertNodeAt(!1,n(a))},c.getMarker=function(e){return i.getElementById(e)},c.removeMarker=function(e){var t=c.getMarker(e);t&&d(t)},c.removeMarkers=function(){c.removeMarker(r),c.removeMarker(a)},c.saveRange=function(){c.insertMarkers()},c.selectRange=function(t){var n,o=e.getSelection(),r=t.endContainer;if(!De&&t.collapsed&&r&&!W(r,!0)){for(n=r.lastChild;n&&E(n,".sceditor-ignore");)n=n.previousSibling;if(E(n,"br")){var a=i.createRange();a.setEndAfter(n),a.collapse(!1),c.compare(t,a)&&(t.setStartBefore(n),t.collapse(!0))}}o&&(c.clear(),o.addRange(t))},c.restoreRange=function(){var e,t=c.selectedRange(),n=c.getMarker(r),o=c.getMarker(a);if(!n||!o||!t)return!1;e=n.nextSibling===o,(t=i.createRange()).setStartBefore(n),t.setEndAfter(o),e&&t.collapse(!0),c.selectRange(t),c.removeMarkers()},c.selectOuterText=function(e,t){var n,o,i=c.cloneSelected();if(!i)return!1;i.collapse(!1),n=Me(i,!0,e),o=Me(i,!1,t),i.setStart(n.node,n.offset),i.setEnd(o.node,o.offset),c.selectRange(i)},c.getOuterText=function(e,t){var n=c.cloneSelected();return n?(n.collapse(!e),Me(n,e,t).text):""},c.replaceKeyword=function(e,t,n,o,i,r){n||e.sort(function(e,t){return e[0].length-t[0].length});var a,l,s,u,d,f,p,m,g=e.length,h=i?1:0,v=o||e[g-1][0].length;for(i&&v++,r=r||"",d=(a=c.getOuterText(!0,v)).length,a+=r,t&&(a+=c.getOuterText(!1,v));g--;)if(p=e[g][0],m=p.length,u=Math.max(0,d-m-h),s=-1,i?(l=a.substr(u).match(new RegExp("(^|[\\sÂ â€‚â€ƒâ€‰])"+G(p)+"(^|[\\sÂ â€‚â€ƒâ€‰])")))&&(s=l.index+u+l[1].length):s=a.indexOf(p,u),s>-1&&s<=d&&s+m+h>=d)return f=d-s,c.selectOuterText(f,m-f-(/^\S/.test(r)?1:0)),c.insertHTML(e[g][1]),!0;return!1},c.compare=function(e,t){return t||(t=c.selectedRange()),e&&t?0===e.compareBoundaryPoints(Range.END_TO_END,t)&&0===e.compareBoundaryPoints(Range.START_TO_START,t):!e&&!t},c.clear=function(){var t=e.getSelection();t&&(t.removeAllRanges?t.removeAllRanges():t.empty&&t.empty())}}function ne(e,t){var n=/[^\s\xA0\u2002\u2003\u2009\u00a0]+/,o=e&&p(e,"img[data-sceditor-emoticon]");if(e&&o.length)for(var i=0;i<o.length;i++){var r=o[i],a=r.parentNode,l=r.previousSibling,c=r.nextSibling;if(l&&n.test(l.nodeValue.slice(-1))||c&&n.test((c.nodeValue||"")[0])){var s=t.cloneSelected(),u=-1,f=s.startContainer,m=l.nodeValue;null===m&&(m=l.innerText||""),m+=C(r,"sceditor-emoticon"),f===c&&(u=m.length+s.startOffset),f===e&&e.childNodes[s.startOffset]===c&&(u=m.length),f===l&&(u=s.startOffset),c&&c.nodeType===fe||(c=a.insertBefore(a.ownerDocument.createTextNode(""),c)),c.insertData(0,m),d(l),d(r),u>-1&&(s.setStart(c,u),s.collapse(!0),t.selectRange(s))}}}function oe(e,t,n){var o=e.ownerDocument,i="(^|\\s|Â |â€‚|â€ƒ|â€‰|$)",a=[],l={};s(e,"code")||(r(t,function(e){l[e]=new RegExp(i+G(e)+i),a.push(e)}),a.sort(function(e,t){return t.length-e.length}),function e(i){for(i=i.firstChild;i;){if(i.nodeType!==de||E(i,"code")||e(i),i.nodeType===fe)for(var r=0;r<a.length;r++){var c=i.nodeValue,s=a[r],u=n?c.search(l[s]):c.indexOf(s);if(u>-1){var d=c.indexOf(s,u),f=L(t[s],o),p=c.substr(d+s.length);f.appendChild(o.createTextNode(p)),i.nodeValue=c.substr(0,d),i.parentNode.insertBefore(f,i.nextSibling)}}i=i.nextSibling}}(e))}function ie(e,t){var n;B(e,function(e){W(e,!0)?(n||T(n=l("p",{},t),e),e.nodeType===fe&&""===e.nodeValue||f(n,e)):n=null},!1,!0)}function re(e,t){var n,a,c,s,v,k,S,D,O,B,L,q,$,K,Q,G,Z,se,ue,me,he,ve,we,Ce,ke,Te,De,Me,_e,Ae,Oe,Be,Ie,Le,Pe,Ve,je,We,qe,Ue,$e,Ye,Ke,Xe,Qe,Ge,Je,Ze,et,tt,nt,ot,it,rt,at,lt,ct,st,ut,dt,ft,pt,mt,gt=this,ht={},vt=[],bt=[],yt={},xt={},wt={};gt.commands=o(!0,{},t.commands||Se);var Ct=gt.opts=o(!0,{},ge,t);gt.opts.emoticons=t.emoticons||ge.emoticons,De=function(){e._sceditor=gt,Ct.locale&&"en"!==Ct.locale&&Ie(),T(a=l("div",{className:"sceditor-container"}),e),w(a,"z-index",Ct.zIndex),He&&N(a,"ie ie"+He),me=e.required,e.required=!1;var t=re.formats[Ct.format];"init"in(n=t?new t:{})&&n.init.call(gt),Be(),We(),Le(),Oe(),Pe(),Ve(),xe||gt.toggleSourceMode(),tt();var o=function(){g(Ne,"load",o),Ct.autofocus&&at(),mt(),ot(),Q.call("ready"),"onReady"in n&&n.onReady.call(gt)};m(Ne,"load",o),"complete"===Re.readyState&&o()},Be=function(){var e=Ct.plugins;e=e?e.toString().split(","):[],Q=new ee(gt),e.forEach(function(e){Q.register(e.trim())})},Ie=function(){var e;($=re.locale[Ct.locale])||(e=Ct.locale.split("-"),$=re.locale[e[0]]),$&&$.dateFormat&&(Ct.dateFormat=$.dateFormat)},Oe=function(){D=l("textarea"),s=l("iframe",{frameborder:0,allowfullscreen:!0}),Ct.startInSourceMode?(N(a,"sourceMode"),b(s)):(N(a,"wysiwygMode"),b(D)),Ct.spellcheck||h(a,"spellcheck","false"),"https:"===Ne.location.protocol&&h(s,"src","javascript:false"),f(a,s),f(a,D),gt.dimensions(Ct.width||F(e),Ct.height||z(e));var t=He?"ie ie"+He:"";t+=ye?" ios":"",(S=s.contentDocument).open(),S.write(Ee("html",{attrs:' class="'+t+'"',spellcheck:Ct.spellcheck?"":'spellcheck="false"',charset:Ct.charset,style:Ct.style})),S.close(),k=S.body,v=s.contentWindow,gt.readOnly(!!Ct.readOnly),(ye||be||He)&&(z(k,"100%"),He||m(k,"touchend",gt.focus));var n=h(e,"tabindex");h(D,"tabindex",n),h(s,"tabindex",n),K=new te(v),b(e),gt.val(e.value);var o=Ct.placeholder||h(e,"placeholder");o&&(D.placeholder=o,h(k,"placeholder",o))},Pe=function(){Ct.autoUpdate&&(m(k,"blur",pt),m(D,"blur",pt)),null===Ct.rtl&&(Ct.rtl="rtl"===w(D,"direction")),gt.rtl(!!Ct.rtl),Ct.autoExpand&&(m(k,"load",mt,pe),m(S,"input keyup",mt)),Ct.resizeEnabled&&je(),h(a,"id",Ct.id),gt.emoticons(Ct.emoticonsEnabled)},Ve=function(){var t=e.form,n="onselectionchange"in S?"selectionchange":"keyup focus blur contextmenu mouseup touchend click";m(Re,"click",Ze),t&&(m(t,"reset",Xe),m(t,"submit",gt.updateOriginal,pe)),m(k,"keypress",Ke),m(k,"keydown",$e),m(k,"keydown",Ye),m(k,"keyup",ot),m(k,"blur",dt),m(k,"keyup",ft),m(k,"paste",qe),m(k,"compositionstart compositionend",Ge),m(k,n,it),m(k,"keydown keyup keypress focus blur contextmenu",Je),Ct.emoticonsCompat&&Ne.getSelection&&m(k,"keyup",ct),m(k,"blur",function(){gt.val()||N(k,"placeholder")}),m(k,"focus",function(){R(k,"placeholder")}),m(D,"blur",dt),m(D,"keyup",ft),m(D,"keydown",$e),m(D,"compositionstart compositionend",Ge),m(D,"keydown keyup keypress focus blur contextmenu",Je),m(S,"mousedown",Qe),m(S,n,it),m(S,"beforedeactivate keyup mouseup",Ae),m(S,"keyup",ot),m(S,"focus",function(){B=null}),m(a,"selectionchanged",rt),m(a,"selectionchanged",tt),m(a,"selectionchanged valuechanged nodechanged pasteraw paste",Je)},Le=function(){var e,t=gt.commands,n=(Ct.toolbarExclude||"").split(","),o=Ct.toolbar.split("|");c=l("div",{className:"sceditor-toolbar",unselectable:"on"}),Ct.icons in re.icons&&(Te=new re.icons[Ct.icons]),r(o,function(o,i){e=l("div",{className:"sceditor-group"}),r(i.split(","),function(o,i){var r,a,l=t[i];!l||n.indexOf(i)>-1||(a=l.shortcut,r=Ee("toolbarButton",{name:i,dispName:gt._(l.name||l.tooltip||i)},!0).firstChild,Te&&Te.create&&Te.create(i)&&(T(Te.create(i),r.firstChild),N(r,"has-icon")),r._sceTxtMode=!!l.txtExec,r._sceWysiwygMode=!!l.exec,H(r,"disabled",!l.exec),m(r,"click",function(e){M(r,"disabled")||_e(r,l),tt(),e.preventDefault()}),m(r,"mousedown",function(e){gt.closeDropDown(),e.preventDefault()}),l.tooltip&&h(r,"title",gt._(l.tooltip)+(a?" ("+a+")":"")),a&&gt.addShortcut(a,i),l.state?bt.push({name:i,state:l.state}):ae(l.exec)&&bt.push({name:i,state:l.exec}),f(e,r),xt[i]=r)}),e.firstChild&&f(c,e)}),f(Ct.toolbarContainer||a,c)},je=function(){var e,t,n,o,i,r,c=l("div",{className:"sceditor-grip"}),s=l("div",{className:"sceditor-resize-cover"}),u="touchcancel touchend mouseup",d=0,p=0,h=0,v=0,x=0,w=0,C=F(a),E=z(a),k=!1,S=gt.rtl();if(e=Ct.resizeMinHeight||E/1.5,t=Ct.resizeMaxHeight||2.5*E,n=Ct.resizeMinWidth||C/1.25,o=Ct.resizeMaxWidth||1.25*C,i=function(i){"touchmove"===i.type?(i=Ne.event,h=i.changedTouches[0].pageX,v=i.changedTouches[0].pageY):(h=i.pageX,v=i.pageY);var r=w+(v-p),a=S?x-(h-d):x+(h-d);o>0&&a>o&&(a=o),n>0&&a<n&&(a=n),Ct.resizeWidth||(a=!1),t>0&&r>t&&(r=t),e>0&&r<e&&(r=e),Ct.resizeHeight||(r=!1),(a||r)&&gt.dimensions(a,r),i.preventDefault()},r=function(e){k&&(k=!1,b(s),R(a,"resizing"),g(Re,"touchmove mousemove",i),g(Re,u,r),e.preventDefault())},Te&&Te.create){var T=Te.create("grip");T&&(f(c,T),N(c,"has-icon"))}f(a,c),f(a,s),b(s),m(c,"touchstart mousedown",function(e){"touchstart"===e.type?(e=Ne.event,d=e.touches[0].pageX,p=e.touches[0].pageY):(d=e.pageX,p=e.pageY),x=F(a),w=z(a),k=!0,N(a,"resizing"),y(s),m(Re,"touchmove mousemove",i),m(Re,u,r),e.preventDefault()})},We=function(){var e=Ct.emoticons,t=Ct.emoticonsRoot||"";e&&(wt=o({},e.more,e.dropdown,e.hidden)),r(wt,function(e,n){wt[e]=Ee("emoticon",{key:e,url:t+(n.url||n),tooltip:n.tooltip||e}),Ct.emoticonsEnabled&&vt.push(l("img",{src:t+(n.url||n)}))})},at=function(){var e,t,n=k.firstChild,o=!!Ct.autofocusEnd;if(A(a)){if(gt.sourceMode())return t=o?D.value.length:0,void D.setSelectionRange(t,t);if(Y(k),o)for((n=k.lastChild)||(n=l("p",{},S),f(k,n));n.lastChild;)n=n.lastChild,!Fe&&E(n,"br")&&n.previousSibling&&(n=n.previousSibling);e=S.createRange(),j(n)?e.selectNodeContents(n):(e.setStartBefore(n),o&&e.setStartAfter(n)),e.collapse(!o),K.selectRange(e),se=e,o&&(k.scrollTop=k.scrollHeight),gt.focus()}},gt.readOnly=function(e){return"boolean"!=typeof e?!D.readonly:(k.contentEditable=!e,D.readonly=!e,et(e),gt)},gt.rtl=function(e){var t=e?"rtl":"ltr";return"boolean"!=typeof e?"rtl"===h(D,"dir"):(h(k,"dir",t),h(D,"dir",t),R(a,"rtl"),R(a,"ltr"),N(a,t),Te&&Te.rtl&&Te.rtl(e),gt)},et=function(e){var t=gt.inSourceMode()?"_sceTxtMode":"_sceWysiwygMode";r(xt,function(n,o){H(o,"disabled",e||!o[t])})},gt.width=function(e,t){return e||0===e?(gt.dimensions(e,null,t),gt):F(a)},gt.dimensions=function(e,t,n){return e=!(!e&&0!==e)&&e,t=!(!t&&0!==t)&&t,!1===e&&!1===t?{width:gt.width(),height:gt.height()}:(!1!==e&&(!1!==n&&(Ct.width=e),F(a,e)),!1!==t&&(!1!==n&&(Ct.height=t),z(a,t)),gt)},gt.height=function(e,t){return e||0===e?(gt.dimensions(null,e,t),gt):z(a)},gt.maximize=function(e){return le(e)?M(a,"sceditor-maximize"):((e=!!e)&&(Ce=Ne.pageYOffset),H(Re.documentElement,"sceditor-maximize",e),H(Re.body,"sceditor-maximize",e),H(a,"sceditor-maximize",e),gt.width(e?"100%":Ct.width,!1),gt.height(e?"100%":Ct.height,!1),e||Ne.scrollTo(0,Ce),mt(),gt)},mt=function(){Ct.autoExpand&&!we&&setTimeout(gt.expandToContent,200)},gt.expandToContent=function(t){if(!gt.maximize()){if(we=!1,!ve){var n=Ct.resizeMinHeight||Ct.height||z(e);ve={min:n,max:Ct.resizeMaxHeight||2*n}}var o=Re.createRange();o.selectNodeContents(k);var i=o.getBoundingClientRect(),r=S.documentElement.clientHeight,a=i.bottom-i.top,l=gt.height()+(a-r);t||-1===ve.max||(l=Math.min(l,ve.max)),gt.height(Math.ceil(Math.max(l,ve.min)))}},gt.destroy=function(){if(Q){Q.destroy(),K=null,B=null,Q=null,O&&d(O),g(Re,"click",Ze);var t=e.form;t&&(g(t,"reset",Xe),g(t,"submit",gt.updateOriginal)),d(D),d(c),d(a),delete e._sceditor,y(e),e.required=me}},gt.createDropDown=function(e,t,n,i){var a,c="sceditor-"+t;gt.closeDropDown(!0),O&&M(O,c)||(!1!==i&&r(p(n,":not(input):not(textarea)"),function(e,t){t.nodeType===de&&h(t,"unselectable","on")}),a=o({top:X(e).top,left:X(e).left,marginTop:e.clientHeight},Ct.dropDownCss),w(O=l("div",{className:"sceditor-dropdown "+c}),a),f(O,n),f(Re.body,O),m(O,"click focusin",function(e){e.stopPropagation()}),setTimeout(function(){if(O){var e=p(O,"input,textarea")[0];e&&e.focus()}}))},Ze=function(e){3!==e.which&&O&&!e.defaultPrevented&&(pt(),gt.closeDropDown())},qe=function(e){var t=He||be,n=k,o=e.clipboardData;if(o&&!t){var i={},r=o.types,a=o.items;e.preventDefault();for(var l=0;l<r.length;l++){if(Ne.FileReader&&a&&ze.test(a[l].type))return function(e){var t=new FileReader;t.onload=function(e){Ue({html:'<img src="'+e.target.result+'" />'})},t.readAsDataURL(e)}(o.items[l].getAsFile());i[r[l]]=o.getData(r[l])}i.text=i["text/plain"],i.html=i["text/html"],Ue(i)}else if(!ke){var c=n.scrollTop;for(K.saveRange(),ke=Re.createDocumentFragment();n.firstChild;)f(ke,n.firstChild);setTimeout(function(){var e=n.innerHTML;n.innerHTML="",f(n,ke),n.scrollTop=c,ke=!1,K.restoreRange(),Ue({html:e})},0)}},Ue=function(e){var t=l("div",{},S);Q.call("pasteRaw",e),_(a,"pasteraw",e),e.html?(t.innerHTML=e.html,U(t)):t.innerHTML=J(e.text||"");var o={val:t.innerHTML};"fragmentToSource"in n&&(o.val=n.fragmentToSource(o.val,S,G)),Q.call("paste",o),_(a,"paste",o),"fragmentToHtml"in n&&(o.val=n.fragmentToHtml(o.val,G)),Q.call("pasteHtml",o),gt.wysiwygEditorInsertHtml(o.val,null,!0)},gt.closeDropDown=function(e){O&&(d(O),O=null),!0===e&&gt.focus()},gt.wysiwygEditorInsertHtml=function(e,t,n){var o,i,r,a=z(s);gt.focus(),!n&&u(Z,"code")||(K.insertHTML(e,t),K.saveRange(),Me(),y(o=p(k,"#sceditor-end-marker")[0]),i=k.scrollTop,r=X(o).top+1.5*o.offsetHeight-a,b(o),(r>i||r+a<i)&&(k.scrollTop=r),ut(!1),K.restoreRange(),ot())},gt.wysiwygEditorInsertText=function(e,t){gt.wysiwygEditorInsertHtml(J(e),J(t))},gt.insertText=function(e,t){return gt.inSourceMode()?gt.sourceEditorInsertText(e,t):gt.wysiwygEditorInsertText(e,t),gt},gt.sourceEditorInsertText=function(e,t){var n,o,i=D.selectionStart,r=D.selectionEnd;n=D.scrollTop,D.focus(),o=D.value,t&&(e+=o.substring(i,r)+t),D.value=o.substring(0,i)+e+o.substring(r,o.length),D.selectionStart=i+e.length-(t?t.length:0),D.selectionEnd=D.selectionStart,D.scrollTop=n,D.focus(),ut()},gt.getRangeHelper=function(){return K},gt.sourceEditorCaret=function(e){return D.focus(),e?(D.selectionStart=e.start,D.selectionEnd=e.end,this):{start:D.selectionStart,end:D.selectionEnd}},gt.val=function(e,t){return ae(e)?(gt.inSourceMode()?gt.setSourceEditorValue(e):(!1!==t&&"toHtml"in n&&(e=n.toHtml(e)),gt.setWysiwygEditorValue(e)),gt):gt.inSourceMode()?gt.getSourceEditorValue(!1):gt.getWysiwygEditorValue(t)},gt.insert=function(e,t,o,i,r){if(gt.inSourceMode())return gt.sourceEditorInsertText(e,t),gt;if(t){var a=K.selectedHtml();!1!==o&&"fragmentToSource"in n&&(a=n.fragmentToSource(a,S,G)),e+=a+t}return!1!==o&&"fragmentToHtml"in n&&(e=n.fragmentToHtml(e,G)),!1!==o&&!0===r&&(e=e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")),gt.wysiwygEditorInsertHtml(e),gt},gt.getWysiwygEditorValue=function(e){for(var t,o=l("div",{},S),i=k.childNodes,r=0;r<i.length;r++)f(o,i[r].cloneNode(!0));return f(k,o),U(o),d(o),t=o.innerHTML,!1!==e&&n.hasOwnProperty("toSource")&&(t=n.toSource(t,S)),t},gt.getBody=function(){return k},gt.getContentAreaContainer=function(){return s},gt.getSourceEditorValue=function(e){var t=D.value;return!1!==e&&"toHtml"in n&&(t=n.toHtml(t)),t},gt.setWysiwygEditorValue=function(e){e||(e="<p>"+(He?"":"<br />")+"</p>"),k.innerHTML=e,Me(),ot(),ut(),mt()},gt.setSourceEditorValue=function(e){D.value=e,ut()},gt.updateOriginal=function(){e.value=gt.val()},Me=function(){Ct.emoticonsEnabled&&oe(k,wt,Ct.emoticonsCompat)},gt.inSourceMode=function(){return M(a,"sourceMode")},gt.sourceMode=function(e){var t=gt.inSourceMode();return"boolean"!=typeof e?t:((t&&!e||!t&&e)&&gt.toggleSourceMode(),gt)},gt.toggleSourceMode=function(){var e=gt.inSourceMode();!xe&&e||(e||(K.saveRange(),K.clear()),gt.blur(),e?gt.setWysiwygEditorValue(gt.getSourceEditorValue()):gt.setSourceEditorValue(gt.getWysiwygEditorValue()),B=null,x(D),x(s),H(a,"wysiwygMode",e),H(a,"sourceMode",!e),et(),tt())},nt=function(){return D.focus(),D.value.substring(D.selectionStart,D.selectionEnd)},_e=function(e,t){gt.inSourceMode()?t.txtExec&&(Array.isArray(t.txtExec)?gt.sourceEditorInsertText.apply(gt,t.txtExec):t.txtExec.call(gt,e,nt())):t.exec&&(ce(t.exec)?t.exec.call(gt,e):gt.execCommand(t.exec,t.hasOwnProperty("execParam")?t.execParam:null))},Ae=function(){He&&(B=K.selectedRange())},gt.execCommand=function(e,t){var n=!1,o=gt.commands[e];if(gt.focus(),!u(K.parentNode(),"code")){try{n=S.execCommand(e,!1,t)}catch(e){}!n&&o&&o.errorMessage&&alert(gt._(o.errorMessage)),tt()}},it=function(){function e(){if(v.getSelection().rangeCount<=0)se=null;else if(K&&!K.compare(se)){if((se=K.cloneSelected())&&se.collapsed){var e=se.startContainer,t=se.startOffset;for(t&&e.nodeType!==fe&&(e=e.childNodes[t]);e&&e.parentNode!==k;)e=e.parentNode;e&&W(e,!0)&&(K.saveRange(),ie(k,S),K.restoreRange())}_(a,"selectionchanged")}ue=!1}ue||(ue=!0,"onselectionchange"in S?e():setTimeout(e,100))},rt=function(){var e,t=K.parentNode();G!==t&&(e=G,G=t,Z=K.getFirstBlockParent(t),_(a,"nodechanged",{oldNode:e,newNode:G}))},gt.currentNode=function(){return G},gt.currentBlockNode=function(){return Z},tt=function(){var e,t,n=S,o=gt.sourceMode();if(gt.readOnly())r(p(c,"active"),function(e,t){R(t,"active")});else{o||(t=K.parentNode(),e=K.getFirstBlockParent(t));for(var i=0;i<bt.length;i++){var a=0,l=xt[bt[i].name],s=bt[i].state,u=o&&!l._sceTxtMode||!o&&!l._sceWysiwygMode;if(ae(s)){if(!o)try{(a=n.queryCommandEnabled(s)?0:-1)>-1&&(a=n.queryCommandState(s)?1:0)}catch(e){}}else u||(a=s.call(gt,t,e));H(l,"disabled",u||a<0),H(l,"active",a>0)}Te&&Te.update&&Te.update(o,t,e)}},Ke=function(e){if(!e.defaultPrevented&&(gt.closeDropDown(),13===e.which)&&!E(Z,"li,ul,ol")&&P(Z)){B=null;var t=l("br",{},S);if(K.insertNode(t),!Fe){var n=t.parentNode,o=n.lastChild;o&&o.nodeType===fe&&""===o.nodeValue&&(d(o),o=n.lastChild),!W(n,!0)&&o===t&&W(t.previousSibling)&&K.insertHTML("<br>")}e.preventDefault()}},ot=function(){I(k,function(e){if(e.nodeType===de&&!/inline/.test(w(e,"display"))&&!E(e,".sceditor-nlf")&&P(e)){var t=l("p",{},S);return t.className="sceditor-nlf",t.innerHTML=Fe?"":"<br />",f(k,t),!1}if(3===e.nodeType&&!/^\s*$/.test(e.nodeValue)||E(e,"br"))return!1})},Xe=function(){gt.val(e.value)},Qe=function(){gt.closeDropDown(),B=null},gt._=function(){var e=arguments;return $&&$[e[0]]&&(e[0]=$[e[0]]),e[0].replace(/\{(\d+)\}/g,function(t,n){return void 0!==e[n-0+1]?e[n-0+1]:"{"+n+"}"})},Je=function(e){Q&&Q.call(e.type+"Event",e,gt);var t=(e.target===D?"scesrc":"scewys")+e.type;ht[t]&&ht[t].forEach(function(t){t.call(gt,e)})},gt.bind=function(e,t,n,o){for(var i=(e=e.split(" ")).length;i--;)if(ce(t)){var r="scewys"+e[i],a="scesrc"+e[i];n||(ht[r]=ht[r]||[],ht[r].push(t)),o||(ht[a]=ht[a]||[],ht[a].push(t)),"valuechanged"===e[i]&&(ut.hasHandler=!0)}return gt},gt.unbind=function(e,t,n,o){for(var r=(e=e.split(" ")).length;r--;)ce(t)&&(n||i(ht["scewys"+e[r]]||[],t),o||i(ht["scesrc"+e[r]]||[],t));return gt},gt.blur=function(e,t,n){return ce(e)?gt.bind("blur",e,t,n):gt.sourceMode()?D.blur():k.blur(),gt},gt.focus=function(e,t,n){if(ce(e))gt.bind("focus",e,t,n);else if(gt.inSourceMode())D.focus();else{if(p(S,":focus").length)return;var o,i=K.selectedRange();se||at(),!Fe&&i&&1===i.endOffset&&i.collapsed&&(o=i.endContainer)&&1===o.childNodes.length&&E(o.firstChild,"br")&&(i.setStartBefore(o.firstChild),i.collapse(!0),K.selectRange(i)),v.focus(),k.focus(),B&&(K.selectRange(B),B=null)}return tt(),gt},gt.keyDown=function(e,t,n){return gt.bind("keydown",e,t,n)},gt.keyPress=function(e,t,n){return gt.bind("keypress",e,t,n)},gt.keyUp=function(e,t,n){return gt.bind("keyup",e,t,n)},gt.nodeChanged=function(e){return gt.bind("nodechanged",e,!1,!0)},gt.selectionChanged=function(e){return gt.bind("selectionchanged",e,!1,!0)},gt.valueChanged=function(e,t,n){return gt.bind("valuechanged",e,t,n)},lt=function(e){var t=0,n=gt.emoticonsCache,o=String.fromCharCode(e.which);u(Z,"code")||(n||(n=[],r(wt,function(e,o){n[t++]=[e,o]}),n.sort(function(e,t){return e[0].length-t[0].length}),gt.emoticonsCache=n,gt.longestEmoticonCode=n[n.length-1][0].length),K.replaceKeyword(gt.emoticonsCache,!0,!0,gt.longestEmoticonCode,Ct.emoticonsCompat,o)&&(Ct.emoticonsCompat&&/^\s$/.test(o)||e.preventDefault()))},ct=function(){ne(Z,K)},gt.emoticons=function(e){return e||!1===e?(Ct.emoticonsEnabled=e,e?(m(k,"keypress",lt),gt.sourceMode()||(K.saveRange(),Me(),ut(!1),K.restoreRange())):(r(p(k,"img[data-sceditor-emoticon]"),function(e,t){var n=C(t,"sceditor-emoticon"),o=S.createTextNode(n);t.parentNode.replaceChild(o,t)}),g(k,"keypress",lt),ut()),gt):Ct.emoticonsEnabled},gt.css=function(e){return he||(he=l("style",{id:"inline"},S),f(S.head,he)),ae(e)?(he.styleSheet?he.styleSheet.cssText=e:he.innerHTML=e,gt):he.styleSheet?he.styleSheet.cssText:he.innerHTML},$e=function(e){var t=[],n={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|","[":"{","]":"}"},o={8:"backspace",9:"tab",13:"enter",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",91:"win",92:"win",93:"select",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scrolllock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},i={109:"-",110:"del",111:"/",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"},r=e.which,a=o[r]||String.fromCharCode(r).toLowerCase();(e.ctrlKey||e.metaKey)&&t.push("ctrl"),e.altKey&&t.push("alt"),e.shiftKey&&(t.push("shift"),i[r]?a=i[r]:n[a]&&(a=n[a])),a&&(r<16||r>18)&&t.push(a),t=t.join("+"),yt[t]&&!1===yt[t].call(gt)&&(e.stopPropagation(),e.preventDefault())},gt.addShortcut=function(e,t){return e=e.toLowerCase(),ae(t)?yt[e]=function(){return _e(xt[t],gt.commands[t]),!1}:yt[e]=t,gt},gt.removeShortcut=function(e){return delete yt[e.toLowerCase()],gt},Ye=function(e){var t,n,o;if(!Ct.disableBlockRemove&&8===e.which&&(n=K.selectedRange())&&(t=n.startContainer,0===n.startOffset&&(o=st())&&!E(o,"body"))){for(;t!==o;){for(;t.previousSibling;)if((t=t.previousSibling).nodeType!==fe||t.nodeValue)return;if(!(t=t.parentNode))return}gt.clearBlockFormatting(o),e.preventDefault()}},st=function(){for(var e=Z;!P(e)||W(e,!0);)if(!(e=e.parentNode)||E(e,"body"))return;return e},gt.clearBlockFormatting=function(e){return!(e=e||st())||E(e,"body")?gt:(K.saveRange(),e.className="",B=null,h(e,"style",""),E(e,"p,div,td")||V(e,"p"),K.restoreRange(),gt)},ut=function(e){if(Q&&(Q.hasHandler("valuechangedEvent")||ut.hasHandler)){var t,n=gt.sourceMode(),o=!n&&K.hasSelection();L=!1,e=!1!==e&&!S.getElementById("sceditor-start-marker"),q&&(clearTimeout(q),q=!1),o&&e&&K.saveRange(),(t=n?D.value:k.innerHTML)!==ut.lastVal&&(ut.lastVal=t,_(a,"valuechanged",{rawValue:n?gt.val():t})),o&&e&&K.removeMarkers()}},dt=function(){q&&ut()},ft=function(e){var t=e.which,n=ft.lastChar,o=13===n||32===n,i=8===n||46===n;ft.lastChar=t,L||(13===t||32===t?o?ft.triggerNext=!0:ut():8===t||46===t?i?ft.triggerNext=!0:ut():ft.triggerNext&&(ut(),ft.triggerNext=!1),clearTimeout(q),q=setTimeout(function(){L||ut()},1500))},Ge=function(e){(L=/start/i.test(e.type))||ut()},pt=function(){gt.updateOriginal()},De()}e=e&&e.hasOwnProperty("default")?e.default:e;var ae=t.bind(null,"string"),le=t.bind(null,"undefined"),ce=t.bind(null,"function"),se=t.bind(null,"number"),ue={},de=1,fe=3,pe=!0,me="|body|hr|p|div|h1|h2|h3|h4|h5|h6|address|pre|form|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|blockquote|center|",ge={toolbar:"bold,italic,underline,strike,subscript,superscript|left,center,right,justify|font,size,color,removeformat|cut,copy,pastetext|bulletlist,orderedlist,indent,outdent|table|code,quote|horizontalrule,image,email,link,unlink|emoticon,youtube,date,time|ltr,rtl|print,maximize,source",toolbarExclude:null,style:"jquery.sceditor.default.css",fonts:"Arial,Arial Black,Comic Sans MS,Courier New,Georgia,Impact,Sans-serif,Serif,Times New Roman,Trebuchet MS,Verdana",colors:"#000000,#44B8FF,#1E92F7,#0074D9,#005DC2,#00369B,#b3d5f4|#444444,#C3FFFF,#9DF9FF,#7FDBFF,#68C4E8,#419DC1,#d9f4ff|#666666,#72FF84,#4CEA5E,#2ECC40,#17B529,#008E02,#c0f0c6|#888888,#FFFF44,#FFFA1E,#FFDC00,#E8C500,#C19E00,#fff5b3|#aaaaaa,#FFC95F,#FFA339,#FF851B,#E86E04,#C14700,#ffdbbb|#cccccc,#FF857A,#FF5F54,#FF4136,#E82A1F,#C10300,#ffc6c3|#eeeeee,#FF56FF,#FF30DC,#F012BE,#D900A7,#B20080,#fbb8ec|#ffffff,#F551FF,#CF2BE7,#B10DC9,#9A00B2,#9A00B2,#e8b6ef",locale:h(document.documentElement,"lang")||"en",charset:"utf-8",emoticonsCompat:!1,emoticonsEnabled:!0,emoticonsRoot:"",emoticons:{dropdown:{":)":"emoticons/smile.png",":angel:":"emoticons/angel.png",":angry:":"emoticons/angry.png","8-)":"emoticons/cool.png",":'(":"emoticons/cwy.png",":ermm:":"emoticons/ermm.png",":D":"emoticons/grin.png","<3":"emoticons/heart.png",":(":"emoticons/sad.png",":O":"emoticons/shocked.png",":P":"emoticons/tongue.png",";)":"emoticons/wink.png"},more:{":alien:":"emoticons/alien.png",":blink:":"emoticons/blink.png",":blush:":"emoticons/blush.png",":cheerful:":"emoticons/cheerful.png",":devil:":"emoticons/devil.png",":dizzy:":"emoticons/dizzy.png",":getlost:":"emoticons/getlost.png",":happy:":"emoticons/happy.png",":kissing:":"emoticons/kissing.png",":ninja:":"emoticons/ninja.png",":pinch:":"emoticons/pinch.png",":pouty:":"emoticons/pouty.png",":sick:":"emoticons/sick.png",":sideways:":"emoticons/sideways.png",":silly:":"emoticons/silly.png",":sleeping:":"emoticons/sleeping.png",":unsure:":"emoticons/unsure.png",":woot:":"emoticons/w00t.png",":wassat:":"emoticons/wassat.png"},hidden:{":whistling:":"emoticons/whistling.png",":love:":"emoticons/wub.png"}},width:null,height:null,resizeEnabled:!0,resizeMinWidth:null,resizeMinHeight:null,resizeMaxHeight:null,resizeMaxWidth:null,resizeHeight:!0,resizeWidth:!0,dateFormat:"year-month-day",toolbarContainer:null,enablePasteFiltering:!1,disablePasting:!1,readOnly:!1,rtl:!1,autofocus:!1,autofocusEnd:!0,autoExpand:!1,autoUpdate:!1,spellcheck:!0,runWithoutWysiwygSupport:!1,startInSourceMode:!1,id:null,plugins:"",zIndex:null,bbcodeTrim:!1,disableBlockRemove:!1,parserOptions:{},dropDownCss:{}},he=navigator.userAgent,ve=function(){var e=3,t=document,n=t.createElement("div"),o=n.getElementsByTagName("i");do{n.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e"}while(o[0]);return t.documentMode&&t.all&&window.atob&&(e=10),4===e&&t.documentMode&&(e=11),e>4?e:void 0}(),be="-ms-ime-align"in document.documentElement.style,ye=/iPhone|iPod|iPad| wosbrowser\//i.test(he),xe=function(){var e,t,n=document.createElement("div");return n.contentEditable=!0,"contentEditable"in document.documentElement&&"true"===n.contentEditable&&(t=/Opera Mobi|Opera Mini/i.test(he),/Android/i.test(he)&&(t=!0,/Safari/.test(he)&&(t=!(e=/Safari\/(\d+)/.exec(he))||!e[1]||e[1]<534)),/ Silk\//i.test(he)&&(t=!(e=/AppleWebKit\/(\d+)/.exec(he))||!e[1]||e[1]<534),ye&&(t=/OS [0-4](_\d)+ like Mac/i.test(he)),/Firefox/i.test(he)&&(t=!1),/OneBrowser/i.test(he)&&(t=!1),"UCWEB"===navigator.vendor&&(t=!1),ve<=9&&(t=!0),!t)}(),we=/^(https?|s?ftp|mailto|spotify|skype|ssh|teamspeak|tel):|(\/\/)|data:image\/(png|bmp|gif|p?jpe?g);/i,Ce={html:'<!DOCTYPE html><html{attrs}><head><style>.ie * {min-height: auto !important} .ie table td {height:15px} @supports (-ms-ime-align:auto) { * { min-height: auto !important; } }</style><meta http-equiv="Content-Type" content="text/html;charset={charset}" /><link rel="stylesheet" type="text/css" href="{style}" /></head><body contenteditable="true" {spellcheck}><p></p></body></html>',toolbarButton:'<a class="sceditor-button sceditor-button-{name}" data-sceditor-command="{name}" unselectable="on"><div unselectable="on">{dispName}</div></a>',emoticon:'<img src="{url}" data-sceditor-emoticon="{key}" alt="{key}" title="{tooltip}" />',fontOpt:'<a class="sceditor-font-option" href="#" data-font="{font}"><font face="{font}">{font}</font></a>',sizeOpt:'<a class="sceditor-fontsize-option" data-size="{size}" href="#"><font size="{size}">{size}</font></a>',pastetext:'<div><label for="txt">{label}</label> <textarea cols="20" rows="7" id="txt"></textarea></div><div><input type="button" class="button" value="{insert}" /></div>',table:'<div><label for="rows">{rows}</label><input type="text" id="rows" value="2" /></div><div><label for="cols">{cols}</label><input type="text" id="cols" value="2" /></div><div><input type="button" class="button" value="{insert}" /></div>',image:'<div><label for="link">{url}</label> <input type="text" id="image" dir="ltr" placeholder="https://" /></div><div><label for="width">{width}</label> <input type="text" id="width" size="2" dir="ltr" /></div><div><label for="height">{height}</label> <input type="text" id="height" size="2" dir="ltr" /></div><div><input type="button" class="button" value="{insert}" /></div>',email:'<div><label for="email">{label}</label> <input type="text" id="email" dir="ltr" /></div><div><label for="des">{desc}</label> <input type="text" id="des" /></div><div><input type="button" class="button" value="{insert}" /></div>',link:'<div><label for="link">{url}</label> <input type="text" id="link" dir="ltr" placeholder="https://" /></div><div><label for="des">{desc}</label> <input type="text" id="des" /></div><div><input type="button" class="button" value="{ins}" /></div>',youtubeMenu:'<div><label for="link">{label}</label> <input type="text" id="link" dir="ltr" placeholder="https://" /></div><div><input type="button" class="button" value="{insert}" /></div>',youtube:'<iframe width="560" height="315" frameborder="0" allowfullscreen src="https://www.youtube.com/embed/{id}?wmode=opaque&start={time}" data-youtube-id="{id}"></iframe>'},Ee=function(e,t,n){var o=Ce[e];return Object.keys(t).forEach(function(e){o=o.replace(new RegExp(G("{"+e+"}"),"g"),t[e])}),n&&(o=L(o)),o},ke=ve&&ve<11,Se={bold:{exec:"bold",tooltip:"Bold",shortcut:"Ctrl+B"},italic:{exec:"italic",tooltip:"Italic",shortcut:"Ctrl+I"},underline:{exec:"underline",tooltip:"Underline",shortcut:"Ctrl+U"},strike:{exec:"strikethrough",tooltip:"Strikethrough"},subscript:{exec:"subscript",tooltip:"Subscript"},superscript:{exec:"superscript",tooltip:"Superscript"},left:{exec:"justifyleft",tooltip:"Align left"},center:{exec:"justifycenter",tooltip:"Center"},right:{exec:"justifyright",tooltip:"Align right"},justify:{exec:"justifyfull",tooltip:"Justify"},font:{_dropDown:function(e,t,n){var o=l("div");m(o,"click","a",function(t){n(C(this,"font")),e.closeDropDown(!0),t.preventDefault()}),e.opts.fonts.split(",").forEach(function(e){f(o,Ee("fontOpt",{font:e},!0))}),e.createDropDown(t,"font-picker",o)},exec:function(e){var t=this;Se.font._dropDown(t,e,function(e){t.execCommand("fontname",e)})},tooltip:"Font Name"},size:{_dropDown:function(e,t,n){var o=l("div");m(o,"click","a",function(t){n(C(this,"size")),e.closeDropDown(!0),t.preventDefault()});for(var i=1;i<=7;i++)f(o,Ee("sizeOpt",{size:i},!0));e.createDropDown(t,"fontsize-picker",o)},exec:function(e){var t=this;Se.size._dropDown(t,e,function(e){t.execCommand("fontsize",e)})},tooltip:"Font Size"},color:{_dropDown:function(e,t,n){var o=l("div"),i="",r=Se.color;r._htmlCache||(e.opts.colors.split("|").forEach(function(e){i+='<div class="sceditor-color-column">',e.split(",").forEach(function(e){i+='<a href="#" class="sceditor-color-option" style="background-color: '+e+'" data-color="'+e+'"></a>'}),i+="</div>"}),r._htmlCache=i),f(o,L(r._htmlCache)),m(o,"click","a",function(t){n(C(this,"color")),e.closeDropDown(!0),t.preventDefault()}),e.createDropDown(t,"color-picker",o)},exec:function(e){var t=this;Se.color._dropDown(t,e,function(e){t.execCommand("forecolor",e)})},tooltip:"Font Color"},removeformat:{exec:"removeformat",tooltip:"Remove Formatting"},cut:{exec:"cut",tooltip:"Cut",errorMessage:"Your browser does not allow the cut command. Please use the keyboard shortcut Ctrl/Cmd-X"},copy:{exec:"copy",tooltip:"Copy",errorMessage:"Your browser does not allow the copy command. Please use the keyboard shortcut Ctrl/Cmd-C"},paste:{exec:"paste",tooltip:"Paste",errorMessage:"Your browser does not allow the paste command. Please use the keyboard shortcut Ctrl/Cmd-V"},pastetext:{exec:function(e){var t,n=l("div"),o=this;f(n,Ee("pastetext",{label:o._("Paste your text inside the following box:"),insert:o._("Insert")},!0)),m(n,"click",".button",function(e){(t=p(n,"#txt")[0].value)&&o.wysiwygEditorInsertText(t),o.closeDropDown(!0),e.preventDefault()}),o.createDropDown(e,"pastetext",n)},tooltip:"Paste Text"},bulletlist:{exec:function(){Z(this),this.execCommand("insertunorderedlist")},tooltip:"Bullet list"},orderedlist:{exec:function(){Z(this),this.execCommand("insertorderedlist")},tooltip:"Numbered list"},indent:{state:function(e,t){var n,o,i,r=c(t,"ul,ol,menu");return r.length>1&&r[0].children.length>1?0:E(t,"ul,ol,menu")&&(n=this.getRangeHelper().selectedRange(),o=n.startContainer.parentNode,i=n.endContainer.parentNode,o!==o.parentNode.firstElementChild||E(i,"li")&&i!==i.parentNode.lastElementChild)?0:-1},exec:function(){var e=this,t=e.getRangeHelper().getFirstBlockParent();e.focus(),c(t,"ul,ol,menu")&&e.execCommand("indent")},tooltip:"Add indent"},outdent:{state:function(e,t){return u(t,"ul,ol,menu")>0?0:-1},exec:function(){c(this.getRangeHelper().getFirstBlockParent(),"ul,ol,menu")&&this.execCommand("outdent")},tooltip:"Remove one indent"},table:{exec:function(e){var t=this,n=l("div");f(n,Ee("table",{rows:t._("Rows:"),cols:t._("Cols:"),insert:t._("Insert")},!0)),m(n,"click",".button",function(e){var o=Number(p(n,"#rows")[0].value),i=Number(p(n,"#cols")[0].value),r="<table>";o>0&&i>0&&(r+=Array(o+1).join("<tr>"+Array(i+1).join("<td>"+(ke?"":"<br />")+"</td>")+"</tr>"),r+="</table>",t.wysiwygEditorInsertHtml(r),t.closeDropDown(!0),e.preventDefault())}),t.createDropDown(e,"inserttable",n)},tooltip:"Insert a table"},horizontalrule:{exec:"inserthorizontalrule",tooltip:"Insert a horizontal rule"},code:{exec:function(){this.wysiwygEditorInsertHtml("<code>",(ke?"":"<br />")+"</code>")},tooltip:"Code"},image:{_dropDown:function(e,t,n,o){var i=l("div");f(i,Ee("image",{url:e._("URL:"),width:e._("Width (optional):"),height:e._("Height (optional):"),insert:e._("Insert")},!0));var r=p(i,"#image")[0];r.value=n,m(i,"click",".button",function(t){r.value&&o(r.value,p(i,"#width")[0].value,p(i,"#height")[0].value),e.closeDropDown(!0),t.preventDefault()}),e.createDropDown(t,"insertimage",i)},exec:function(e){var t=this;Se.image._dropDown(t,e,"",function(e,n,o){var i="";n&&(i+=' width="'+n+'"'),o&&(i+=' height="'+o+'"'),t.wysiwygEditorInsertHtml("<img"+i+' src="'+e+'" />')})},tooltip:"Insert an image"},email:{_dropDown:function(e,t,n){var o=l("div");f(o,Ee("email",{label:e._("E-mail:"),desc:e._("Description (optional):"),insert:e._("Insert")},!0)),m(o,"click",".button",function(t){var i=p(o,"#email")[0].value;i&&n(i,p(o,"#des")[0].value),e.closeDropDown(!0),t.preventDefault()}),e.createDropDown(t,"insertemail",o)},exec:function(e){var t=this;Se.email._dropDown(t,e,function(e,n){t.focus(),!t.getRangeHelper().selectedHtml()||n?t.wysiwygEditorInsertHtml('<a href="mailto:'+e+'">'+(n||e)+"</a>"):t.execCommand("createlink","mailto:"+e)})},tooltip:"Insert an email"},link:{_dropDown:function(e,t,n){function o(t){r.value&&n(r.value,p(i,"#des")[0].value),e.closeDropDown(!0),t.preventDefault()}var i=l("div");f(i,Ee("link",{url:e._("URL:"),desc:e._("Description (optional):"),ins:e._("Insert")},!0));var r=p(i,"#link")[0];m(i,"click",".button",o),m(i,"keypress",function(e){13===e.which&&r.value&&o(e)},pe),e.createDropDown(t,"insertlink",i)},exec:function(e){var t=this;Se.link._dropDown(t,e,function(e,n){t.focus(),!t.getRangeHelper().selectedHtml()||n?(n=n||e,t.wysiwygEditorInsertHtml('<a href="'+e+'">'+n+"</a>")):t.execCommand("createlink",e)})},tooltip:"Insert a link"},unlink:{state:function(){return u(this.currentNode(),"a")?0:-1},exec:function(){var e=u(this.currentNode(),"a");if(e){for(;e.firstChild;)T(e.firstChild,e);d(e)}},tooltip:"Unlink"},quote:{exec:function(e,t,n){var o="<blockquote>",i="</blockquote>";t?(o=o+(n=n?"<cite>"+n+"</cite>":"")+t+i,i=null):""===this.getRangeHelper().selectedHtml()&&(i=(ke?"":"<br />")+i),this.wysiwygEditorInsertHtml(o,i)},tooltip:"Insert a Quote"},emoticon:{exec:function(e){var t=this,n=function(i){var a,c=t.opts,s=c.emoticonsRoot||"",u=c.emoticonsCompat,d=t.getRangeHelper(),p=u&&" "!==d.getOuterText(!0,1)?" ":"",g=u&&" "!==d.getOuterText(!1,1)?" ":"",v=l("div"),b=l("div"),y=0,x=o({},c.emoticons.dropdown,i?c.emoticons.more:{});return f(v,b),y=Math.sqrt(Object.keys(x).length),m(v,"click","img",function(e){t.insert(p+h(this,"alt")+g,null,!1).closeDropDown(!0),e.preventDefault()}),r(x,function(e,t){f(b,l("img",{src:s+(t.url||t),alt:e,title:t.tooltip||e})),b.children.length>=y&&(b=l("div"),f(v,b))}),!i&&c.emoticons.more&&(f(a=l("a",{className:"sceditor-more"}),document.createTextNode(t._("More"))),m(a,"click",function(o){t.createDropDown(e,"more-emoticons",n(!0)),o.preventDefault()}),f(v,a)),v};t.createDropDown(e,"emoticons",n(!1))},txtExec:function(e){Se.emoticon.exec.call(this,e)},tooltip:"Insert an emoticon"},youtube:{_dropDown:function(e,t,n){var o=l("div");f(o,Ee("youtubeMenu",{label:e._("Video URL:"),insert:e._("Insert")},!0)),m(o,"click",".button",function(t){var i=p(o,"#link")[0].value,a=i.match(/(?:v=|v\/|embed\/|youtu.be\/)(.{11})/),l=i.match(/[&|?](?:star)?t=((\d+[hms]?){1,3})/),c=0;l&&r(l[1].split(/[hms]/),function(e,t){""!==t&&(c=60*c+Number(t))}),a&&/^[a-zA-Z0-9_\-]{11}$/.test(a[1])&&n(a[1],c),e.closeDropDown(!0),t.preventDefault()}),e.createDropDown(t,"insertlink",o)},exec:function(e){var t=this;Se.youtube._dropDown(t,e,function(e,n){t.wysiwygEditorInsertHtml(Ee("youtube",{id:e,time:n}))})},tooltip:"Insert a YouTube video"},date:{_date:function(e){var t=new Date,n=t.getYear(),o=t.getMonth()+1,i=t.getDate();return n<2e3&&(n=1900+n),o<10&&(o="0"+o),i<10&&(i="0"+i),e.opts.dateFormat.replace(/year/i,n).replace(/month/i,o).replace(/day/i,i)},exec:function(){this.insertText(Se.date._date(this))},txtExec:function(){this.insertText(Se.date._date(this))},tooltip:"Insert current date"},time:{_time:function(){var e=new Date,t=e.getHours(),n=e.getMinutes(),o=e.getSeconds();return t<10&&(t="0"+t),n<10&&(n="0"+n),o<10&&(o="0"+o),t+":"+n+":"+o},exec:function(){this.insertText(Se.time._time())},txtExec:function(){this.insertText(Se.time._time())},tooltip:"Insert current time"},ltr:{state:function(e,t){return t&&"ltr"===t.style.direction},exec:function(){var e=this,t=e.getRangeHelper(),n=t.getFirstBlockParent();e.focus(),(n&&!E(n,"body")||(e.execCommand("formatBlock","p"),(n=t.getFirstBlockParent())&&!E(n,"body")))&&w(n,"direction","ltr"===w(n,"direction")?"":"ltr")},tooltip:"Left-to-Right"},rtl:{state:function(e,t){return t&&"rtl"===t.style.direction},exec:function(){var e=this,t=e.getRangeHelper(),n=t.getFirstBlockParent();e.focus(),(n&&!E(n,"body")||(e.execCommand("formatBlock","p"),(n=t.getFirstBlockParent())&&!E(n,"body")))&&w(n,"direction","rtl"===w(n,"direction")?"":"rtl")},tooltip:"Right-to-Left"},print:{exec:"print",tooltip:"Print"},maximize:{state:function(){return this.maximize()},exec:function(){this.maximize(!this.maximize())},txtExec:function(){this.maximize(!this.maximize())},tooltip:"Maximize",shortcut:"Ctrl+Shift+M"},source:{state:function(){return this.sourceMode()},exec:function(){this.toggleSourceMode()},txtExec:function(){this.toggleSourceMode()},tooltip:"View source",shortcut:"Ctrl+Shift+S"},ignore:{}},Te={};ee.plugins=Te;var De=ve&&ve<11,Me=function(e,t,n){var o,i,r,a,l,c="",s=e.startContainer,u=e.startOffset;for(s&&3!==s.nodeType&&(s=s.childNodes[u],u=0),r=a=u;n>c.length&&s&&3===s.nodeType;)o=s.nodeValue,i=n-c.length,l&&(a=o.length,r=0),l=s,t?(u=r=Math.max(a-i,0),c=o.substr(r,a-r)+c,s=l.previousSibling):(u=r+(a=Math.min(i,o.length)),c+=o.substr(r,a),s=l.nextSibling);return{node:l||s,offset:u,text:c}},Ne=window,Re=document,He=ve,Fe=He&&He<11,ze=/^image\/(p?jpe?g|gif|png|bmp)$/i;re.locale={},re.formats={},re.icons={},re.command={get:function(e){return Se[e]||null},set:function(e,t){return!(!e||!t)&&(t=o(Se[e]||{},t),t.remove=function(){re.command.remove(e)},Se[e]=t,this)},remove:function(e){return Se[e]&&delete Se[e],this}},window.sceditor={command:re.command,commands:Se,defaultOptions:ge,ie:ve,ios:ye,isWysiwygSupported:xe,regexEscape:G,escapeEntities:J,escapeUriScheme:function(e){var t,n=/^[^\/]*:/i,o=window.location;return e&&n.test(e)&&!we.test(e)?((t=o.pathname.split("/")).pop(),o.protocol+"//"+o.host+t.join("/")+"/"+e):e},dom:{css:w,attr:h,removeAttr:v,is:E,closest:u,width:F,height:z,traverse:B,rTraverse:I,parseHTML:L,hasStyling:P,convertElement:V,blockLevelList:me,canHaveChildren:j,isInline:W,copyCSS:q,fixNesting:U,findCommonAncestor:function(e,t){for(;e=e.parentNode;)if(k(e,t))return e},getSibling:$,removeWhiteSpace:Y,extractContents:K,getOffset:X,getStyle:Q,hasStyle:function(e,t,n){var o=Q(e,t);return!!o&&(!n||o===n||Array.isArray(n)&&n.indexOf(o)>-1)}},locale:re.locale,icons:re.icons,utils:{each:r,isEmptyObject:n,extend:o},plugins:ee.plugins,formats:re.formats,create:function(e,t){t=t||{},s(e,".sceditor-container")||(t.runWithoutWysiwygSupport||xe)&&new re(e,t)},instance:function(e){return e._sceditor}},e.sceditor=window.sceditor,e.fn.sceditor=function(t){var n,o=[];return this.each(function(){n=this._sceditor,"state"===t?o.push(!!n):"instance"===t?o.push(n):n||e.sceditor.create(this,t)}),o.length?1===o.length?o[0]:o:this}}(jQuery),function(e){"use strict";function t(){function o(t,n,o){var r,a=o.createElement("div");return a.innerHTML=n,i(a,"visibility","hidden"),o.body.appendChild(a),l(a),f(a),h(a),t||g(a),r=(new e.XHTMLSerializer).serialize(a,!0),o.body.removeChild(a),r}function r(e,t){b[e]&&b[e].forEach(function(n){n.tags[e]?u(n.tags[e],function(e,o){t.getAttributeNode&&(!(e=t.getAttributeNode(e))||o&&o.indexOf(e.value)<0||n.conv.call(v,t))}):n.conv&&n.conv.call(v,t)})}function l(e){n.traverse(e,function(e){var t=e.nodeName.toLowerCase();r("*",e),r(t,e)},!0)}function c(e,o){var i,r=e.childNodes,l=e.nodeName.toLowerCase(),s=e.nodeValue,u=r.length,d=t.allowedEmptyTags||[];if(o&&"br"===l)return!0;if(a(e,".sceditor-ignore"))return!0;if(d.indexOf(l)>-1||"td"===l||!n.canHaveChildren(e))return!1;if(s&&/\S|\u00A0/.test(s))return!1;for(;u--;)if(!c(r[u],o&&!e.previousSibling&&!e.nextSibling))return!1;return!e.getBoundingClientRect||!e.className&&!e.hasAttributes("style")||(!(i=e.getBoundingClientRect()).width||!i.height)}function f(e){n.traverse(e,function(o){var i,r=o.nodeName.toLowerCase(),a=o.parentNode,l=o.nodeType,s=!n.isInline(o),u=o.previousSibling,d=o.nextSibling,f=a===e,p=!u&&!d,m="iframe"!==r&&c(o,f&&p&&"br"!==r),g=o.ownerDocument,h=t.allowedTags,v=t.disallowedTags;if(3!==l&&(4===l?r="!cdata":"!"!==r&&8!==l||(r="!comment"),m?i=!0:h&&h.length?i=h.indexOf(r)<0:v&&v.length&&(i=v.indexOf(r)>-1),i)){if(!m){for(s&&u&&n.isInline(u)&&a.insertBefore(g.createTextNode(" "),o);o.firstChild;)a.insertBefore(o.firstChild,d);s&&d&&n.isInline(d)&&a.insertBefore(g.createTextNode(" "),d)}a.removeChild(o)}},!0)}function m(e,t){var n={};return e&&s(n,e),t?(u(t,function(e,t){Array.isArray(t)?n[e]=(n[e]||[]).concat(t):n[e]||(n[e]=null)}),n):n}function g(e){n.removeWhiteSpace(e);for(var t,o,i=e.firstChild;i;)o=i.nextSibling,n.isInline(i)&&!a(i,".sceditor-ignore")?(t||(t=e.ownerDocument.createElement("p"),i.parentNode.insertBefore(t,i)),t.appendChild(i)):t=null,i=o}function h(e){var o,i,r,a,l,c,s=t.allowedAttribs,u=s&&!d(s),f=t.disallowedAttribs,p=f&&!d(f);y={},n.traverse(e,function(e){if(e.attributes&&(o=e.nodeName.toLowerCase(),a=e.attributes.length))for(y[o]||(y[o]=u?m(s["*"],s[o]):m(f["*"],f[o]));a--;)i=e.attributes[a],r=i.name,l=y[o][r],c=!1,u?c=null!==l&&(!Array.isArray(l)||l.indexOf(i.value)<0):p&&(c=null===l||Array.isArray(l)&&l.indexOf(i.value)>-1),c&&e.removeAttribute(r)})}var v=this,b={},y={};v.init=function(){d(t.converters||{})||u(t.converters,function(e,t){u(t.tags,function(e){b[e]||(b[e]=[]),b[e].push(t)})}),this.commands=s(!0,{},p,this.commands)},v.toSource=o.bind(null,!1),v.fragmentToSource=o.bind(null,!0)}var n=e.dom,o=e.utils,i=n.css,r=n.attr,a=n.is,l=n.removeAttr,c=n.convertElement,s=o.extend,u=o.each,d=o.isEmptyObject,f=e.command.get,p={bold:{txtExec:["<strong>","</strong>"]},italic:{txtExec:["<em>","</em>"]},underline:{txtExec:['<span style="text-decoration:underline;">',"</span>"]},strike:{txtExec:['<span style="text-decoration:line-through;">',"</span>"]},subscript:{txtExec:["<sub>","</sub>"]},superscript:{txtExec:["<sup>","</sup>"]},left:{txtExec:['<div style="text-align:left;">',"</div>"]},center:{txtExec:['<div style="text-align:center;">',"</div>"]},right:{txtExec:['<div style="text-align:right;">',"</div>"]},justify:{txtExec:['<div style="text-align:justify;">',"</div>"]},font:{txtExec:function(e){var t=this;f("font")._dropDown(t,e,function(e){t.insertText('<span style="font-family:'+e+';">',"</span>")})}},size:{txtExec:function(e){var t=this;f("size")._dropDown(t,e,function(e){t.insertText('<span style="font-size:'+e+';">',"</span>")})}},color:{txtExec:function(e){var t=this;f("color")._dropDown(t,e,function(e){t.insertText('<span style="color:'+e+';">',"</span>")})}},bulletlist:{txtExec:["<ul><li>","</li></ul>"]},orderedlist:{txtExec:["<ol><li>","</li></ol>"]},table:{txtExec:["<table><tr><td>","</td></tr></table>"]},horizontalrule:{txtExec:["<hr />"]},code:{txtExec:["<code>","</code>"]},image:{txtExec:function(e,t){var n=this;f("image")._dropDown(n,e,t,function(e,t,o){var i="";t&&(i+=' width="'+t+'"'),o&&(i+=' height="'+o+'"'),n.insertText("<img"+i+' src="'+e+'" />')})}},email:{txtExec:function(e,t){var n=this;f("email")._dropDown(n,e,function(e,o){n.insertText('<a href="mailto:'+e+'">'+(o||t||e)+"</a>")})}},link:{txtExec:function(e,t){var n=this;f("link")._dropDown(n,e,function(e,o){n.insertText('<a href="'+e+'">'+(o||t||e)+"</a>")})}},quote:{txtExec:["<blockquote>","</blockquote>"]},youtube:{txtExec:function(e){var t=this;f("youtube")._dropDown(t,e,function(e,n){t.insertText('<iframe width="560" height="315" src="https://www.youtube.com/embed/{id}?wmode=opaque&start='+n+'" data-youtube-id="'+e+'" frameborder="0" allowfullscreen></iframe>')})}},rtl:{txtExec:['<div stlye="direction:rtl;">',"</div>"]},ltr:{txtExec:['<div stlye="direction:ltr;">',"</div>"]}};e.XHTMLSerializer=function(){function e(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","Â ":"&nbsp;"};return e?e.replace(/[&<>"\xa0]/g,function(e){return t[e]||e}):""}function t(e){return e.replace(/[\r\n]/," ").replace(/[^\S|\u00A0]+/g," ")}function o(e,t){switch(e.nodeType){case 1:"!"===e.nodeName.toLowerCase()?s(e):l(e,t);break;case 3:u(e,t);break;case 4:c(e);break;case 8:s(e);break;case 9:case 11:r(e)}}function r(e){for(var t=e.firstChild;t;)o(t),t=t.nextSibling}function l(t,r){var l,c,s,u=t.nodeName.toLowerCase(),p="iframe"===u,m=t.attributes.length,h=t.firstChild,v=r||/pre(?:\-wrap)?$/i.test(i(t,"whiteSpace")),b=!t.firstChild&&!n.canHaveChildren(t)&&!p;if(!a(t,".sceditor-ignore")){for(d("<"+u,!r&&f(t));m--;)s=(c=t.attributes[m]).value,d(" "+c.name.toLowerCase()+'="'+e(s)+'"',!1);for(d(b?" />":">",!1),p||(l=h);l;)g++,o(l,v),l=l.nextSibling,g--;b||d("</"+u+">",!v&&!p&&f(t)&&h&&f(h))}}function c(t){d("<![CDATA["+e(t.nodeValue)+"]]>")}function s(t){d("\x3c!-- "+e(t.nodeValue)+" --\x3e")}function u(n,o){var i=n.nodeValue;o||(i=t(i)),i&&d(e(i),!o&&f(n))}function d(e,t){var n=g;if(!1!==t)for(m.length&&m.push("\n");n--;)m.push(p.indentStr);m.push(e)}function f(e){var t=e.previousSibling;return 1!==e.nodeType&&t?!n.isInline(t):!t&&!n.isInline(e.parentNode)||!n.isInline(e)}var p={indentStr:"\t"},m=[],g=0;this.serialize=function(e,t){if(m=[],t)for(e=e.firstChild;e;)o(e),e=e.nextSibling;else o(e);return m.join("")}},t.converters=[{tags:{"*":{width:null}},conv:function(e){i(e,"width",r(e,"width")),l(e,"width")}},{tags:{"*":{height:null}},conv:function(e){i(e,"height",r(e,"height")),l(e,"height")}},{tags:{li:{value:null}},conv:function(e){l(e,"value")}},{tags:{"*":{text:null}},conv:function(e){i(e,"color",r(e,"text")),l(e,"text")}},{tags:{"*":{color:null}},conv:function(e){i(e,"color",r(e,"color")),l(e,"color")}},{tags:{"*":{face:null}},conv:function(e){i(e,"fontFamily",r(e,"face")),l(e,"face")}},{tags:{"*":{align:null}},conv:function(e){i(e,"textAlign",r(e,"align")),l(e,"align")}},{tags:{"*":{border:null}},conv:function(e){i(e,"borderWidth",r(e,"border")),l(e,"border")}},{tags:{applet:{name:null},img:{name:null},layer:{name:null},map:{name:null},object:{name:null},param:{name:null}},conv:function(e){r(e,"id")||r(e,"id",r(e,"name")),l(e,"name")}},{tags:{"*":{vspace:null}},conv:function(e){i(e,"marginTop",r(e,"vspace")-0),i(e,"marginBottom",r(e,"vspace")-0),l(e,"vspace")}},{tags:{"*":{hspace:null}},conv:function(e){i(e,"marginLeft",r(e,"hspace")-0),i(e,"marginRight",r(e,"hspace")-0),l(e,"hspace")}},{tags:{hr:{noshade:null}},conv:function(e){i(e,"borderStyle","solid"),l(e,"noshade")}},{tags:{"*":{nowrap:null}},conv:function(e){i(e,"whiteSpace","nowrap"),l(e,"nowrap")}},{tags:{big:null},conv:function(e){i(c(e,"span"),"fontSize","larger")}},{tags:{small:null},conv:function(e){i(c(e,"span"),"fontSize","smaller")}},{tags:{b:null},conv:function(e){c(e,"strong")}},{tags:{u:null},conv:function(e){i(c(e,"span"),"textDecoration","underline")}},{tags:{s:null,strike:null},conv:function(e){i(c(e,"span"),"textDecoration","line-through")}},{tags:{dir:null},conv:function(e){c(e,"ul")}},{tags:{center:null},conv:function(e){i(c(e,"div"),"textAlign","center")}},{tags:{font:{size:null}},conv:function(e){i(e,"fontSize",i(e,"fontSize")),l(e,"size")}},{tags:{font:null},conv:function(e){c(e,"span")}},{tags:{"*":{type:["_moz"]}},conv:function(e){l(e,"type")}},{tags:{"*":{_moz_dirty:null}},conv:function(e){l(e,"_moz_dirty")}},{tags:{"*":{_moz_editor_bogus_node:null}},conv:function(e){e.parentNode.removeChild(e)}}],t.allowedAttribs={},t.disallowedAttribs={},t.allowedTags=[],t.disallowedTags=[],t.allowedEmptyTags=[],e.formats.xhtml=t}(sceditor);